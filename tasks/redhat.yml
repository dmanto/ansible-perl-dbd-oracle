---
- find:
    paths: "{{ role_path }}/files/oracle"
    patterns: "*.rpm"
  register: oracle_rpms

- name: Installs rpms, RedHar except Fedora
  when: ansible_distribution != 'Fedora'
  yum:
    name:  "{{ item.path }}"
    state: present
  with_items: "{{ oracle_rpms.files  | sort(attribute='path') }}"

- name: Installs cpanm
  yum: name=perl-App-cpanminus state=present update_cache=yes
  when: cpanm_installed.stdout == ''
